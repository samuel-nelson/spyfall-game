<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>The Operative - Free Online Multiplayer Mole Game | Play Now</title>
    <meta name="description" content="Play The Operative online for free! A thrilling multiplayer deduction game where players must identify the mole among them. Perfect for parties, friends, and family. No download required.">
    <meta name="keywords" content="the operative, mole game, multiplayer game, deduction game, party game, free game, online game, mole game online, operative game, play the operative">
    <meta name="author" content="The Operative Game">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#0a0a0a">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://spyfall-game.netlify.app/">
    <meta property="og:title" content="The Operative - Free Online Multiplayer Mole Game">
    <meta property="og:description" content="Play The Operative online for free! A thrilling multiplayer deduction game where players must identify the mole among them.">
    <meta property="og:image" content="https://spyfall-game.netlify.app/og-image.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://spyfall-game.netlify.app/">
    <meta property="twitter:title" content="The Operative - Free Online Multiplayer Mole Game">
    <meta property="twitter:description" content="Play The Operative online for free! A thrilling multiplayer deduction game where players must identify the mole among them.">
    <meta property="twitter:image" content="https://spyfall-game.netlify.app/og-image.jpg">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://spyfall-game.netlify.app/">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="styles.css">
    <script>
        // Initialize theme from localStorage BEFORE page renders to prevent jumping
        (function() {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            if (savedTheme === 'light') {
                document.documentElement.classList.add('light-mode');
            }
        })();
    </script>
</head>
<body>
    <div class="container">
        <!-- Main Menu -->
        <div id="main-menu" class="screen active">
            <button id="theme-toggle-btn-main" class="theme-toggle-icon" title="Toggle Theme">
                <span class="theme-icon-dark">◐</span>
                <span class="theme-icon-light">◑</span>
            </button>
            <div class="menu-content">
                <div class="logo">
                    <h1 class="title-main">THE OPERATIVE</h1>
                    <p class="subtitle">ATTN: Catch the mole</p>
                </div>
                <div class="classified-stamp">CLASSIFIED</div>
                <div class="menu-buttons">
                    <button id="create-game-btn" class="btn btn-primary">CREATE OPERATION</button>
                    <button id="join-game-btn" class="btn btn-secondary">JOIN OPERATION</button>
                </div>
                <div id="how-to-play" class="how-to-play">
                    <h3>HOW TO PLAY</h3>
                    <div class="how-to-content">
                        <p><strong>OBJECTIVE:</strong> Non-mole agents must identify the mole through strategic questioning. The mole must identify the location or survive until time expires.</p>
                        <p><strong>SETUP:</strong> Each player receives a location card—except one player, who is the mole and receives no location. The host creates a game and shares the code with other players.</p>
                        <p><strong>GAMEPLAY:</strong> Players take turns asking and answering questions about the location. When it's your turn, you'll see a "Your move" banner at the top of the screen—this appears for the first player only and disappears after 15 seconds. After that, the person being interrogated (the one who just answered) can then ask a question to any agent/player of their choice. The mole must blend in without revealing ignorance of the location by giving vague or generic answers.</p>
                        <p><strong>VOTING:</strong> At any time, players can vote to identify the mole. If a majority votes for the same player, the round ends and the result is revealed.</p>
                        <p><strong>WINNING:</strong> Non-moles win by correctly identifying the mole through majority vote. The mole wins by correctly guessing the location or surviving until time runs out without being identified.</p>
                    </div>
                </div>
                
                <div id="faq-section" class="faq-section">
                    <h3>FREQUENTLY ASKED QUESTIONS</h3>
                    <div class="faq-content">
                        <div class="faq-item">
                            <h4>What is The Operative?</h4>
                            <p>The Operative is a free online multiplayer deduction game inspired by Spyfall. Players are assigned secret locations—except one player who is the "mole" and doesn't know the location. The mole must identify the location through careful observation, while other players try to identify the mole through strategic questioning. It's a perfect free alternative to Spyfall that you can play instantly in your browser.</p>
                        </div>
                        <div class="faq-item">
                            <h4>How do I play Spyfall online for free?</h4>
                            <p>The Operative is a completely free Spyfall alternative that you can play instantly in your browser. No downloads, no accounts, no credit card required. Simply create a game, share the code with friends, and start playing immediately. Works on desktop, tablet, and mobile devices—perfect for playing with friends remotely or in person.</p>
                        </div>
                        <div class="faq-item">
                            <h4>Is The Operative similar to Spyfall?</h4>
                            <p>Yes! The Operative is inspired by Spyfall and follows similar gameplay mechanics. Like Spyfall, players receive location cards (except the mole), take turns asking and answering questions, and try to identify the mole or the location. It's a perfect free alternative to Spyfall for playing spy games online without any cost or registration.</p>
                        </div>
                        <div class="faq-item">
                            <h4>How many players can play?</h4>
                            <p>The Operative supports 3-12 players, making it perfect for small groups or larger parties. The game works best with 4-8 players for optimal gameplay and strategic questioning. Whether you're looking for a quick game with a few friends or a larger session, The Operative adapts to your group size.</p>
                        </div>
                        <div class="faq-item">
                            <h4>Do I need to download anything?</h4>
                            <p>No downloads required! The Operative is a completely free browser-based game. Just visit the website, create or join a game, and start playing immediately. No downloads, no accounts, no credit card required—just pure fun accessible from any modern web browser.</p>
                        </div>
                        <div class="faq-item">
                            <h4>Can I play on mobile devices?</h4>
                            <p>Absolutely! The Operative is fully responsive and works seamlessly on smartphones, tablets, and desktop computers. Play with friends whether you're all in the same room or connecting remotely. The mobile-friendly design ensures everyone can enjoy the game regardless of their device.</p>
                        </div>
                        <div class="faq-item">
                            <h4>What makes The Operative different from other spy games?</h4>
                            <p>The Operative stands out as a completely free game that requires no registration and works instantly in any modern web browser. It features a sleek spy thriller aesthetic, multiple locations, and supports both in-person and remote gameplay. Perfect for parties, game nights, or online hangouts—it brings people together without barriers.</p>
                        </div>
                        <div class="faq-item">
                            <h4>How do I win as the mole?</h4>
                            <p>As the mole, you win by either correctly guessing the secret location or surviving until the time runs out without being identified by the other players. Your mission is to blend in, observe carefully, and either identify the location or outlast your opponents.</p>
                        </div>
                        <div class="faq-item">
                            <h4>How do I win as a non-mole player?</h4>
                            <p>Non-mole players win by correctly identifying the mole through strategic questioning and majority vote. Pay attention to answers that seem vague or don't match the location! Your objective is to catch the mole before they identify the location or time runs out.</p>
                        </div>
                        <div class="faq-item">
                            <h4>Is The Operative completely free?</h4>
                            <p>Yes! The Operative is completely free to play—no hidden costs, no premium features, no ads. Just create a game and start playing with friends immediately. It's the free spy game you've been looking for, with no strings attached. Perfect for anyone searching for free spy games or Spyfall online free.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Create Game Screen -->
        <div id="create-game" class="screen">
            <button id="theme-toggle-btn-create" class="theme-toggle-icon" title="Toggle Theme">
                <span class="theme-icon-dark">◐</span>
                <span class="theme-icon-light">◑</span>
            </button>
            <div class="menu-content">
                <h2>CREATE OPERATION</h2>
                <div class="form-group">
                    <label for="player-name-create">AGENT NAME</label>
                    <input type="text" id="player-name-create" placeholder="Enter your codename" maxlength="20">
                </div>
                <div class="form-group">
                    <label for="game-code-create">OPERATION CODE (OPTIONAL)</label>
                    <input type="text" id="game-code-create" placeholder="Leave empty for auto-generated" maxlength="6" pattern="[A-Z0-9]*">
                </div>
                <div class="form-actions">
                    <button id="start-game-btn" class="btn btn-primary">INITIATE</button>
                    <button id="back-to-menu-btn" class="btn btn-secondary">ABORT</button>
                </div>
            </div>
        </div>


        <!-- Join Game Screen -->
        <div id="join-game" class="screen">
            <button id="theme-toggle-btn-join" class="theme-toggle-icon" title="Toggle Theme">
                <span class="theme-icon-dark">◐</span>
                <span class="theme-icon-light">◑</span>
            </button>
            <div class="menu-content">
                <h2>JOIN OPERATION</h2>
                <div class="form-group">
                    <label for="player-name-join">AGENT NAME</label>
                    <input type="text" id="player-name-join" placeholder="Enter your codename" maxlength="20">
                </div>
                <div class="form-group">
                    <label for="game-code-join">OPERATION CODE</label>
                    <input type="text" id="game-code-join" placeholder="Enter operation code" maxlength="6" pattern="[A-Z0-9]*">
                </div>
                <div class="form-actions">
                    <button id="join-game-submit-btn" class="btn btn-primary">INFILTRATE</button>
                    <button id="back-to-menu-btn-2" class="btn btn-secondary">ABORT</button>
                </div>
            </div>
        </div>

        <!-- Lobby Screen -->
        <div id="lobby" class="screen">
            <div class="lobby-content">
                <h2>OPERATION BRIEFING</h2>
                <div class="game-info">
                    <div class="info-item">
                        <span class="info-label">OPERATION CODE</span>
                        <span class="info-value" id="display-game-code"></span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">AGENTS</span>
                        <span class="info-value" id="player-count">0</span>
                    </div>
                </div>
                <div id="players-list" class="players-list"></div>
                
                <!-- Game Settings (Host Only) -->
                <div id="game-settings" class="game-settings" style="display: none;">
                    <h3>GAME SETTINGS</h3>
                    <div class="settings-grid">
                        <div class="form-group">
                            <label for="mole-count">MOLE COUNT</label>
                            <select id="mole-count">
                                <option value="1">1 Mole</option>
                                <option value="2">2 Moles</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="show-mole-count">SHOW MOLE COUNT</label>
                            <select id="show-mole-count">
                                <option value="true">Visible</option>
                                <option value="false">Hidden</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="timer-minutes">TIMER (MINUTES)</label>
                            <input type="number" id="timer-minutes" min="1" max="60" value="8">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>LOCATION PACKS</label>
                        <div class="pack-selector">
                            <label class="pack-option">
                                <input type="checkbox" id="pack1-checkbox" checked>
                                <span class="pack-label">Pack 1</span>
                            </label>
                            <label class="pack-option">
                                <input type="checkbox" id="pack2-checkbox">
                                <span class="pack-label">Pack 2</span>
                            </label>
                            <label class="pack-option">
                                <input type="checkbox" id="countries-checkbox">
                                <span class="pack-label">Countries</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <div id="lobby-actions" class="lobby-actions">
                    <button id="start-round-btn" class="btn btn-primary" style="display: none;">BEGIN OPERATION</button>
                    <p class="waiting-text">Awaiting additional agents... (Minimum 3 required)</p>
                </div>
                <div class="lobby-footer">
                    <button id="leave-game-btn" class="btn btn-secondary">EXFILTRATE</button>
                </div>
            </div>
            <button id="theme-toggle-btn" class="theme-toggle-icon" title="Toggle Theme">
                <span class="theme-icon-dark">◐</span>
                <span class="theme-icon-light">◑</span>
            </button>
        </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <button id="theme-toggle-btn-game" class="theme-toggle-icon" title="Toggle Theme">
                <span class="theme-icon-dark">◐</span>
                <span class="theme-icon-light">◑</span>
            </button>
            <div class="game-content">
                <div class="game-header">
                    <div class="header-left">
                        <span class="round-label">ROUND</span>
                        <span id="round-number" class="round-number">1</span>
                    </div>
                    <div class="header-center">
                        <span id="mole-count-display" class="mole-count-display" style="display: none;"></span>
                    </div>
                    <div class="header-right">
                        <div class="timer-container">
                            <span class="timer-label">TIME REMAINING</span>
                            <span id="timer-display" class="timer">8:00</span>
                        </div>
                    </div>
                </div>
                
                <div id="first-turn-banner" class="first-turn-banner" style="display: none;">
                    <div class="banner-content">
                        <div class="banner-scribble">Your move</div>
                    </div>
                </div>
                
                <div id="mole-view" class="role-view" style="display: none;">
                    <div class="role-card mole-card">
                        <div class="role-badge">CLASSIFIED</div>
                        <h3>YOU ARE THE MOLE</h3>
                        <div class="role-divider"></div>
                        <p class="role-mission">Your objective: Identify the location through careful observation of questions and answers without revealing your ignorance.</p>
                        <p class="role-warning">Maintain your cover at all costs.</p>
                    </div>
                </div>
                <div id="location-view" class="role-view" style="display: none;">
                    <div class="role-card location-card">
                        <div class="role-badge">LOCATION</div>
                        <div id="location-name" class="location-display"></div>
                        <div id="player-role" class="player-role-display" style="display: none;">
                            <div class="role-label">YOUR ROLE</div>
                            <div id="role-name" class="role-name"></div>
                        </div>
                        <div class="role-divider"></div>
                        <p class="role-mission">Your objective: Answer questions naturally without revealing the location. Identify the mole among you.</p>
                    </div>
                </div>

                <div id="possible-locations" class="possible-locations"></div>
                <div id="players-status" class="players-status" style="display: none;"></div>
                
                <div id="question-area" class="question-area" style="display: none;">
                    <div class="current-question">
                        <div class="question-header">ACTIVE INTERROGATION</div>
                        <p id="current-question-text" class="question-text"></p>
                        <p class="question-meta">
                            <span id="question-asker" class="question-asker"></span> → <span id="question-answerer" class="question-answerer"></span>
                        </p>
                    </div>
                </div>

                <div id="voting-area" class="voting-area" style="display: none;">
                    <div class="voting-header">
                        <h3>COLLECTIVE VOTE</h3>
                        <p class="voting-description">Non-mole agents may vote to identify the mole. Majority vote ends the round.</p>
                    </div>
                    <div id="vote-status" class="vote-status"></div>
                    <button id="vote-mole-btn" class="btn btn-primary" style="display: none;">CAST VOTE</button>
                </div>

                <div id="game-actions" class="game-actions">
                    <button id="vote-mole-action-btn" class="btn btn-secondary" style="display: none;">VOTE FOR MOLE</button>
                    <button id="guess-location-btn" class="btn btn-primary" style="display: none;">IDENTIFY LOCATION</button>
                </div>
            </div>
                </div>

    </div>

    <!-- Modals - Moved outside all containers to be direct children of body -->
    <div id="answer-modal" class="modal">
                    <div class="modal-content">
                        <button class="modal-close" onclick="closeModal('answer-modal')">×</button>
                        <h3>RESPOND</h3>
                        <p id="question-to-answer" class="question-prompt"></p>
                        <div class="form-group">
                            <label for="answer-text">YOUR RESPONSE</label>
                            <textarea id="answer-text" placeholder="Enter your answer..." maxlength="200"></textarea>
                        </div>
                        <div class="modal-buttons">
                            <button id="submit-answer-btn" class="btn btn-primary">SUBMIT</button>
                        </div>
                    </div>
                </div>

    <div id="vote-modal" class="modal">
                    <div class="modal-content">
                        <button class="modal-close" onclick="closeModal('vote-modal')">×</button>
                        <h3>CAST YOUR VOTE</h3>
                        <p class="vote-instruction">Select the agent you believe is the mole:</p>
                        <div class="form-group">
                            <label for="voted-player">SUSPECT</label>
                            <select id="voted-player"></select>
                        </div>
                        <div class="modal-buttons">
                            <button id="submit-vote-btn" class="btn btn-primary">VOTE</button>
                            <button id="cancel-vote-btn" class="btn btn-secondary">CANCEL</button>
                        </div>
                    </div>
                </div>

    <div id="guess-location-modal" class="modal">
                    <div class="modal-content">
                        <button class="modal-close" onclick="closeModal('guess-location-modal')">×</button>
                        <h3>IDENTIFY LOCATION</h3>
                        <p class="guess-instruction">What location do you believe the operation is taking place?</p>
                        <div class="form-group">
                            <label for="guessed-location">LOCATION</label>
                            <div id="location-select-grid" class="location-select-grid"></div>
                        </div>
                        <div class="modal-buttons">
                            <button id="submit-guess-btn" class="btn btn-primary">SUBMIT</button>
                            <button id="cancel-guess-btn" class="btn btn-secondary">CANCEL</button>
                        </div>
                    </div>
                </div>

    <div id="game-result-modal" class="modal">
                    <div class="modal-content result-content">
                        <button class="modal-close" onclick="closeModal('game-result-modal')">×</button>
                        <h3 id="result-title"></h3>
                        <div id="result-content"></div>
                        <div class="modal-buttons">
                            <button id="next-round-btn" class="btn btn-primary" style="display: none;">NEXT ROUND</button>
                            <button id="back-to-lobby-btn" class="btn btn-secondary">RETURN TO BRIEFING</button>
                </div>
            </div>
    </div>

    <script src="locations.js"></script>
    <script src="game.js"></script>
</body>
</html>
